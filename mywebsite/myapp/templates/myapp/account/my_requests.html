{% extends 'myapp/layout/base.html' %}
{% block content %}
<div class="container py-4">
  <h2 class="text-xl font-semibold text-slate-900 mb-3">My Pickup Requests</h2>
  {% if requests %}
    <div class="rounded-2xl border border-peach-400/70 bg-white/70 backdrop-blur-md divide-y divide-peach-300/60">
      {% for r in requests %}
        <div class="p-4">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-semibold text-slate-900">Request #{{ r.id }} — {{ r.get_status_display }}</h3>
            <small class="text-slate-600">Requested {{ r.requested_at|date:'Y-m-d H:i' }}</small>
          </div>
          <p class="text-slate-700 mt-1">Pickup location: {{ r.pickup_location|default:'Main Desk' }}{% if r.pickup_by %} — Pickup by: {{ r.pickup_by|date:'Y-m-d' }}{% endif %}</p>
          <ul class="list-disc pl-5 text-slate-800 mt-2">
            {% for item in r.items.all %}
              <li>{{ item.book.title }}{% if item.assigned_copy %} — reserved: {{ item.assigned_copy.barcode }}{% endif %}</li>
            {% endfor %}
          </ul>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-slate-600">No requests yet.</p>
  {% endif %}
</div>
{% endblock %}

