{% extends 'myapp/layout/base.html' %}
{% load static %}

{% block head_extra %}{% endblock head_extra %}

{% block myheader %}
  <div class="bg-gradient-to-r from-lavender via-pink to-peach rounded-3xl p-8 mb-8 shadow-xl">
    <div class="text-center">
      <h1 class="text-4xl md:text-5xl font-bold text-gray-800">Welcome</h1>
      <p class="text-gray-700 mt-1">Explore featured items</p>
    </div>
  </div>
{% endblock myheader %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-6">
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for product in allproduct %}
      <div class="bg-white/90 backdrop-blur-xl rounded-3xl border-2 border-gray-100 shadow-xl overflow-hidden">
        {% if product.picture %}
          <img src="{{ product.picture.url }}" alt="{{ product.title }}" class="w-full h-48 object-cover" />
        {% endif %}
        <div class="p-5">
          <h5 class="text-lg font-bold text-gray-800 mb-1">{{ product.title }}</h5>
          <p class="text-gray-600 mb-3 line-clamp-3">{{ product.description }}</p>
          <div class="flex items-center justify-between mb-4">
            <span class="text-xl font-extrabold text-gray-800">${{ product.price }}</span>
            <span class="inline-flex items-center gap-1.5 px-3 py-1 bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-700">Stock: {{ product.quantity }}</span>
          </div>
          {% if product.specfile %}
            <a href="{{ product.specfile.url }}" class="w-full inline-flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-gradient-to-r from-indigo to-purple-500 text-white font-bold shadow-md hover:shadow-lg hover:scale-105 transition-all" download>
              View Details
            </a>
          {% else %}
            <button class="w-full inline-flex items-center justify-center gap-2 px-4 py-3 rounded-xl border-2 border-gray-300 bg-white text-gray-400 cursor-not-allowed" disabled>No Details Available</button>
          {% endif %}
        </div>
      </div>
    {% empty %}
      <div class="col-span-full">
        <div class="bg-white/90 backdrop-blur-xl rounded-3xl border-2 border-gray-100 shadow-xl p-10 text-center">
          <p class="text-gray-600 text-lg mb-0">No items available at the moment</p>
        </div>
      </div>
    {% endfor %}
  </div>

  {% if allproduct.paginator %}
    <nav aria-label="Product pagination" class="mt-8">
      <div class="bg-white/90 backdrop-blur-xl rounded-2xl border-2 border-gray-200 p-4 shadow-lg">
        <ul class="flex justify-center flex-wrap gap-2">
          <li>
            <a class="inline-flex items-center gap-2 px-5 py-3 bg-white border-2 border-gray-200 text-gray-700 rounded-xl font-semibold {% if allproduct.has_previous %}hover:bg-indigo hover:text-white hover:border-indigo{% else %}cursor-not-allowed opacity-50{% endif %} transition-all"
               href="{% if allproduct.has_previous %}?page={{ allproduct.previous_page_number }}{% else %}#{% endif %}">
              Previous
            </a>
          </li>
          {% for num in allproduct.paginator.page_range %}
            <li>
              <a class="px-5 py-3 border-2 rounded-xl font-semibold {% if allproduct.number == num %}bg-indigo border-indigo text-white shadow-md{% else %}bg-white border-gray-200 text-gray-700 hover:bg-indigo hover:text-white hover:border-indigo{% endif %} transition-all" href="?page={{ num }}">{{ num }}</a>
            </li>
          {% endfor %}
          <li>
            <a class="inline-flex items-center gap-2 px-5 py-3 bg-white border-2 border-gray-200 text-gray-700 rounded-xl font-semibold {% if allproduct.has_next %}hover:bg-indigo hover:text-white hover:border-indigo{% else %}cursor-not-allowed opacity-50{% endif %} transition-all"
               href="{% if allproduct.has_next %}?page={{ allproduct.next_page_number }}{% else %}#{% endif %}">
              Next
            </a>
          </li>
        </ul>
        <div class="text-center text-gray-600 text-sm mt-4 font-medium">
          Page <span class="text-indigo font-bold">{{ allproduct.number }}</span> of <span class="font-bold">{{ allproduct.paginator.num_pages }}</span>
        </div>
      </div>
    </nav>
  {% endif %}
</div>
{% endblock content %}


