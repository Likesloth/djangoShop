{% extends "myapp/layout/base.html" %}

{% block myheader %}
  <div class="bg-gradient-to-r from-lavender via-pink to-peach rounded-3xl p-8 mb-8 shadow-xl text-center">
    <h1 class="text-4xl md:text-5xl font-bold text-gray-800">{{ contact.topic }}</h1>
    <p class="text-gray-700">Contact detail and related actions</p>
  </div>
{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-6">
  <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
    <div class="lg:col-span-2">
      <div class="bg-white/90 backdrop-blur-xl rounded-3xl border-2 border-gray-100 shadow-xl overflow-hidden">
        <div class="px-6 py-3 bg-gradient-to-r from-indigo/10 via-purple-500/10 to-pink/10 border-b-2 border-gray-100">
          <h3 class="text-lg font-bold text-gray-800">Contact Info</h3>
        </div>
        <div class="p-6">
          <div class="mb-3 text-gray-800"><span class="font-bold">Email:</span> {{ contact.email }}</div>
          <div class="mb-3 text-gray-800"><span class="font-bold">Status:</span>
            {% if contact.complete %}
              <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-lg border-2 border-emerald-300 text-emerald-700 bg-emerald-50 text-xs font-bold">Complete</span>
            {% else %}
              <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-lg border-2 border-amber-300 text-amber-700 bg-amber-50 text-xs font-bold">Pending</span>
            {% endif %}
          </div>
          <div class="text-gray-800">
            <div class="font-bold mb-1">Detail</div>
            <div class="text-gray-700">{{ contact.detail|default:"No detail provided." }}</div>
          </div>
          <div class="mt-4 flex gap-2">
            <form method="post" action="{% url 'contact-toggle-complete' contact.id %}">
              {% csrf_token %}
              {% if contact.complete %}
                <input type="hidden" name="complete" value="false">
                <button class="inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border-2 border-gray-300 bg-white text-gray-700 hover:bg-gray-50 hover:border-gray-400 text-sm font-semibold" type="submit">Mark pending</button>
              {% else %}
                <input type="hidden" name="complete" value="true">
                <button class="inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border-2 border-emerald-300 bg-emerald-50 text-emerald-700 hover:bg-emerald-100 text-sm font-semibold" type="submit">Mark complete</button>
              {% endif %}
            </form>
            <a class="inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border-2 border-gray-300 bg-white text-gray-700 hover:bg-gray-50 hover:border-gray-400 text-sm font-semibold" href="{% url 'showcontact-page' %}?contact={{ contact.id }}">Back to list</a>
          </div>
        </div>
      </div>
    </div>
    <div class="lg:col-span-3 space-y-6">
      <div class="bg-white/90 backdrop-blur-xl rounded-3xl border-2 border-gray-100 shadow-xl overflow-hidden">
        <div class="px-6 py-3 bg-gradient-to-r from-indigo/10 via-purple-500/10 to-pink/10 border-b-2 border-gray-100">
          <h3 class="text-lg font-bold text-gray-800">Actions</h3>
        </div>
        <div class="p-3">
          {% if actions %}
            <div class="divide-y divide-gray-100 rounded-md border-2 border-gray-100">
              {% for action in actions %}
                <a class="flex justify-between items-start px-4 py-3 hover:bg-indigo/5" href="{% url 'action-detail' action.id %}">
                  <div>
                    <div class="font-bold text-gray-800 mb-1">{{ action.name }}</div>
                    <div class="text-sm text-gray-500">Updated {{ action.updated_at|date:'M d, Y H:i' }}</div>
                  </div>
                  {% if action.complete %}
                    <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-lg border-2 border-emerald-300 text-emerald-700 bg-emerald-50 text-xs font-bold">Done</span>
                  {% else %}
                    <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-lg border-2 border-amber-300 text-amber-700 bg-amber-50 text-xs font-bold">Pending</span>
                  {% endif %}
                </a>
              {% endfor %}
            </div>
          {% else %}
            <p class="text-gray-600 mb-0">No actions yet for this contact.</p>
          {% endif %}
        </div>
      </div>

      <div class="bg-white/90 backdrop-blur-xl rounded-3xl border-2 border-gray-100 shadow-xl overflow-hidden">
        <div class="px-6 py-3 bg-gradient-to-r from-indigo/10 via-purple-500/10 to-pink/10 border-b-2 border-gray-100">
          <h3 class="text-lg font-bold text-gray-800">Add Action</h3>
        </div>
        <div class="p-6">
          <form method="post">
            {% csrf_token %}
            <div class="mb-4">
              <label class="block text-sm font-bold text-gray-700 mb-2" for="id_name">Name</label>
              {{ form.name }}
            </div>
            <div class="mb-6">
              <label class="block text-sm font-bold text-gray-700 mb-2" for="id_detail">Detail</label>
              {{ form.detail }}
            </div>
            <div class="flex justify-end">
              <button class="inline-flex items-center justify-center gap-2 px-6 py-3.5 rounded-xl bg-gradient-to-r from-indigo to-purple-500 text-white font-bold shadow-lg hover:shadow-xl transition-all" type="submit">Create Action</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

